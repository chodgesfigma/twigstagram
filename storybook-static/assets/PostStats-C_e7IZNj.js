import{j as i}from"./jsx-runtime-CGpYA4L6.js";import{u as j,a as L,b as $,c as y}from"./queriesAndMutations-C1C6liHq.js";import{a as N}from"./utils-sGJAxcXv.js";import{r as l}from"./index-CleY8y_P.js";import{L as _}from"./Loader-DUht5tEw.js";const c=({post:e,userId:n})=>{const m=e==null?void 0:e.likes.map(t=>t.$id),[d,u]=l.useState(m),[v,o]=l.useState(!1),{mutate:f}=j(),{mutate:g,isPending:P}=L(),{mutate:h,isPending:k}=$(),{data:a}=y();l.useEffect(()=>{const t=a==null?void 0:a.save.find(s=>s.post.$id===e.$id);o(!!t)},[a,e==null?void 0:e.$id]);const p=t=>{t.stopPropagation();let s=[...d];s.includes(n)?s=s.filter(S=>S!==n):s.push(n),u(s),f({postId:(e==null?void 0:e.$id)||"",likesArray:s})},x=t=>{t.stopPropagation();const s=a==null?void 0:a.save.find(r=>r.post.$id===e.$id);s?(o(!1),h(s.$id)):(g({postId:(e==null?void 0:e.$id)||"",userId:n}),o(!0))};return i.jsxs("div",{className:"flex justify-between items-center z-20",children:[i.jsxs("div",{className:"flex gap-2 mr-5",children:[i.jsx("img",{src:N(d,n)?"/assets/icons/liked.svg":"/assets/icons/like.svg",alt:"like",width:20,height:20,onClick:p,className:"cursor-pointer"}),i.jsx("p",{className:"small-medium lg:base-medium",children:d.length})]}),i.jsx("div",{className:"flex gap-2",children:P||k?i.jsx(_,{}):i.jsx("img",{src:v?"/assets/icons/saved.svg":"/assets/icons/save.svg",alt:"save",width:20,height:20,onClick:x,className:"cursor-pointer"})})]})},I=c;try{c.displayName="PostStats",c.__docgenInfo={description:"",displayName:"PostStats",props:{post:{defaultValue:null,description:"",name:"post",required:!1,type:{name:"Document"}},userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}export{I as P};
